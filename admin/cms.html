<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Decap CMS</title>
    <script src="https://unpkg.com/netlify-cms@2.10.49/dist/netlify-cms.js" async defer></script>
  </head>
  <body>
    <div id="nc-root"></div>
    <script>
      function tryInitCMS(attempt = 0) {
        if (typeof CMS !== "undefined") {
          CMS.init();
        } else if (attempt < 10) {
          setTimeout(() => tryInitCMS(attempt + 1), 200);
        } else {
          document.body.innerHTML = "<p style='color:red;'>CMS failed to load after multiple attempts.</p>";
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        tryInitCMS();
      });
    </script>
  </body>
</html>
